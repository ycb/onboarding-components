<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding Components - Live Demo</title>
    <script>
        // Polyfill for process
        window.process = { env: { NODE_ENV: 'development' } };
    </script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #f9fafb;
            margin: 0;
            padding: 0;
        }
        /* Fix card header padding issues */
        .card-header {
            padding: 1.5rem !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        // Load the UMD bundle
        const script = document.createElement('script');
        script.src = './onboarding-components.umd.js';
        script.onload = function() {
            console.log('UMD bundle loaded successfully');
            console.log('OnboardingComponents available:', !!window.OnboardingComponents);
            console.log('ContentUploadModule available:', !!window.OnboardingComponents?.ContentUploadModule);
            
            if (window.OnboardingComponents && window.OnboardingComponents.ContentUploadModule) {
                renderApp();
            } else {
                document.getElementById('root').innerHTML = '<div style="padding: 2rem; text-align: center;"><h1>Error</h1><p>Failed to load components. Check console for details.</p></div>';
            }
        };
        script.onerror = function() {
            console.error('Failed to load UMD bundle');
            document.getElementById('root').innerHTML = '<div style="padding: 2rem; text-align: center;"><h1>Error</h1><p>Failed to load component bundle.</p></div>';
        };
        document.head.appendChild(script);

        function renderApp() {
            const { useState } = React;
            const { ContentUploadModule } = window.OnboardingComponents;

            function App() {
                const [uploadedFiles, setUploadedFiles] = useState([]);
                const [textInputs, setTextInputs] = useState({});

                const handleFileUpload = (file, type) => {
                    console.log('File uploaded:', file, type);
                    const newFile = {
                        id: Date.now(),
                        name: file.name,
                        size: file.size,
                        type: file.type,
                        uploadType: type,
                        timestamp: new Date().toISOString()
                    };
                    setUploadedFiles(prev => [...prev, newFile]);
                };

                const handleTextInput = (text, type) => {
                    console.log('Text input:', text, type);
                    setTextInputs(prev => ({
                        ...prev,
                        [type]: {
                            text: text,
                            timestamp: new Date().toISOString()
                        }
                    }));
                };

                const handleUploadError = (error) => {
                    console.error('Upload error:', error);
                };

                const handleLinkedInUrl = (url) => {
                    console.log('LinkedIn URL:', url);
                };

                const handleUploadComplete = (fileId, type) => {
                    console.log('Upload complete:', fileId, type);
                };

                const handleNextStep = () => {
                    console.log('Next step clicked');
                };

                return React.createElement('div', {
                    className: 'min-h-screen bg-gray-50 p-8'
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: 'text-center mb-8 bg-white p-8 rounded-lg shadow-sm'
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: 'text-4xl font-bold text-gray-900 mb-4'
                        }, 'Onboarding Components'),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: 'text-lg text-gray-600'
                        }, 'A collection of reusable React components for user onboarding flows')
                    ]),
                    React.createElement('div', {
                        key: 'demo',
                        className: 'bg-white p-8 rounded-lg shadow-sm'
                    }, [
                        React.createElement('h2', {
                            key: 'title',
                            className: 'text-2xl font-bold text-gray-900 mb-4'
                        }, 'Live Demo'),
                        React.createElement('p', {
                            key: 'description',
                            className: 'text-gray-600 mb-6'
                        }, 'Try out the interactive components below. These are the actual React components with full functionality.'),
                        React.createElement(ContentUploadModule, {
                            key: 'contentUpload',
                            currentStep: 'content',
                            onFileUpload: handleFileUpload,
                            onLinkedInUrl: handleLinkedInUrl,
                            onTextInput: handleTextInput,
                            onUploadComplete: handleUploadComplete,
                            onUploadError: handleUploadError,
                            onNextStep: handleNextStep,
                            isProcessing: false,
                            onboardingData: {
                                resume: undefined,
                                coverLetter: '',
                                coverLetterFile: undefined
                            },
                            linkedinUrl: ''
                        })
                    ])
                ]);
            }

            ReactDOM.render(React.createElement(App), document.getElementById('root'));
        }
    </script>
</body>
</html>